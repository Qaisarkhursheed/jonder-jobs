{"version":3,"sources":["webpack:///./src/views/Meet.vue?80fb","webpack:///src/views/Meet.vue","webpack:///./src/views/Meet.vue?984e","webpack:///./src/views/Meet.vue","webpack:///../../../src/components/VCard/VCard.ts"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","_e","_v","_s","error","text","type","on","attemptJoin","$t","$event","$router","push","class","initializing","staticRenderFns","components","data","meeting","jitsiApi","computed","user","$store","getters","created","methods","validateMeeting","initJitsi","JitsiMeetExternalAPI","roomName","meet_id","width","height","parentNode","document","querySelector","userInfo","id","displayName","$options","filters","fullname","email","configOverwrite","defaultLanguage","locale","toolbarButtons","interfaceConfigOverwrite","SHOW_JITSI_WATERMARK","onload","executeCommand","profile_img","addEventListener","innerHTML","component","VBtn","VCard","VProgressCircular","name","props","flat","hover","img","link","loaderHeight","Number","default","raised","Boolean","classes","styles","style","genProgress","key","h","tag","setBackgroundColor","$slots"],"mappings":"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","file":"js/chunk-bd947184.bc2ddd09.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('jobseeker-layout',[_c('div',{staticClass:\"d-flex full-h justify-center align-center text-center\"},[(_vm.initializing)?_c('v-progress-circular',{attrs:{\"indeterminate\":\"\",\"size\":\"150\",\"color\":\"primary\"}}):_vm._e(),(_vm.error)?_c('div',{staticClass:\"text-h4\"},[_vm._v(\" \"+_vm._s(_vm.error.text)+\" \"),(_vm.error.type == 'left-meeting')?_c('div',{staticClass:\"mt-5\"},[_c('v-btn',{attrs:{\"text\":\"\",\"height\":\"48\"},on:{\"click\":_vm.attemptJoin}},[_vm._v(\" \"+_vm._s(_vm.$t(\"rejoin\"))+\" \")]),_c('v-btn',{staticClass:\"ml-3\",attrs:{\"color\":\"primary\",\"height\":\"48\"},on:{\"click\":function($event){return _vm.$router.push('/')}}},[_vm._v(\" \"+_vm._s(_vm.$t(\"backToHome\"))+\" \")])],1):_vm._e()]):_vm._e(),_c('v-card',{staticClass:\"full-h full-w\",class:{ 'd-none': _vm.initializing || _vm.error },attrs:{\"id\":\"jitsi-container\",\"flat\":\"\"}})],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <jobseeker-layout>\n    <div class=\"d-flex full-h justify-center align-center text-center\">\n      <!-- Loading spinner -->\n      <v-progress-circular\n        v-if=\"initializing\"\n        indeterminate\n        size=\"150\"\n        color=\"primary\"\n      ></v-progress-circular>\n\n      <!-- Errors -->\n      <div v-if=\"error\" class=\"text-h4\">\n        {{ error.text }}\n\n        <div v-if=\"error.type == 'left-meeting'\" class=\"mt-5\">\n          <v-btn text height=\"48\" @click=\"attemptJoin\">\n            {{ $t(\"rejoin\") }}\n          </v-btn>\n          <v-btn\n            color=\"primary\"\n            height=\"48\"\n            @click=\"$router.push('/')\"\n            class=\"ml-3\"\n          >\n            {{ $t(\"backToHome\") }}\n          </v-btn>\n        </div>\n      </div>\n\n      <!-- Jitsi Meet container -->\n      <v-card\n        id=\"jitsi-container\"\n        :class=\"{ 'd-none': initializing || error }\"\n        class=\"full-h full-w\"\n        flat\n      >\n      </v-card>\n    </div>\n  </jobseeker-layout>\n</template>\n\n<script>\nimport JobseekerLayout from \"@/layouts/jobseeker/JobseekerLayout\";\n\nexport default {\n  components: { JobseekerLayout },\n\n  data() {\n    return {\n      meeting: null,\n      jitsiApi: null,\n      initializing: true,\n      error: null\n    };\n  },\n\n  computed: {\n    user() {\n      return this.$store.getters[\"user/user\"];\n    }\n  },\n\n  created() {\n    this.$store\n      .dispatch(\"meetings/fetchByMeetId\", this.$route.params.meet_id)\n      .then(r => {\n        this.meeting = r.data?.meeting;\n      })\n      .finally(() => {\n        this.attemptJoin();\n      });\n  },\n\n  methods: {\n    attemptJoin() {\n      this.error = null;\n      this.validateMeeting();\n      this.initJitsi();\n    },\n\n    validateMeeting() {\n      if (!this.meeting) {\n        this.error = {\n          type: \"not-found\",\n          text: this.$t(\"meetingNotFound\")\n        };\n        return;\n      }\n\n      if (\n        this.meeting.jobseeker_id != this.user.id &&\n        this.meeting.employer_id != this.user.id\n      ) {\n        this.error = {\n          type: \"not-allowed\",\n          text: this.$t(\"meetingNotAllowed\")\n        };\n        return;\n      }\n    },\n\n    initJitsi() {\n      if (this.error) {\n        this.initializing = false;\n        return;\n      }\n\n      this.initializing = true;\n\n      // eslint-disable-next-line no-undef\n      this.jitsiApi = new JitsiMeetExternalAPI(\"jitsi.jonder.jobs\", {\n        roomName: this.meeting.meet_id,\n        width: \"100%\",\n        height: \"100%\",\n        parentNode: document.querySelector(\"#jitsi-container\"),\n        userInfo: {\n          id: this.user.id,\n          displayName: this.$options.filters.fullname(this.user),\n          email: this.user.email\n        },\n        configOverwrite: {\n          defaultLanguage: this.user.locale || \"de\",\n          toolbarButtons: [\n            \"camera\",\n            \"chat\",\n            \"closedcaptions\",\n            \"desktop\",\n            \"download\",\n            // \"embedmeeting\",\n            \"etherpad\",\n            \"feedback\",\n            \"filmstrip\",\n            \"fullscreen\",\n            \"hangup\",\n            \"help\",\n            // \"invite\",\n            // \"livestreaming\",\n            \"microphone\",\n            // \"mute-everyone\",\n            // \"mute-video-everyone\",\n            \"participants-pane\",\n            \"profile\",\n            \"raisehand\",\n            // \"recording\",\n            // \"security\",\n            \"select-background\",\n            \"settings\",\n            \"shareaudio\",\n            \"sharedvideo\",\n            \"shortcuts\",\n            \"stats\",\n            \"tileview\",\n            \"toggle-camera\",\n            \"videoquality\",\n            \"__end\"\n          ]\n        },\n        interfaceConfigOverwrite: {\n          SHOW_JITSI_WATERMARK: false\n        },\n        onload: () => {\n          this.initializing = false;\n        }\n      });\n\n      // Set avatar\n      this.jitsiApi.executeCommand(\"avatarUrl\", this.user.profile_img);\n\n      // Set tile view\n      this.jitsiApi.executeCommand(\"toggleTileView\");\n\n      // Event readyToClose\n      this.jitsiApi.addEventListener(\"readyToClose\", () => {\n        this.error = {\n          type: \"left-meeting\",\n          text: this.$t(\"meetingLeft\")\n        };\n        document.querySelector(\"#jitsi-container\").innerHTML = \"\";\n      });\n    }\n  }\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Meet.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Meet.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Meet.vue?vue&type=template&id=04c2e074&\"\nimport script from \"./Meet.vue?vue&type=script&lang=js&\"\nexport * from \"./Meet.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VProgressCircular } from 'vuetify/lib/components/VProgressCircular';\ninstallComponents(component, {VBtn,VCard,VProgressCircular})\n","// Styles\nimport './VCard.sass'\n\n// Extensions\nimport VSheet from '../VSheet'\n\n// Mixins\nimport Loadable from '../../mixins/loadable'\nimport Routable from '../../mixins/routable'\n\n// Helpers\nimport mixins from '../../util/mixins'\n\n// Types\nimport { VNode } from 'vue'\n\n/* @vue/component */\nexport default mixins(\n  Loadable,\n  Routable,\n  VSheet\n).extend({\n  name: 'v-card',\n\n  props: {\n    flat: Boolean,\n    hover: Boolean,\n    img: String,\n    link: Boolean,\n    loaderHeight: {\n      type: [Number, String],\n      default: 4,\n    },\n    raised: Boolean,\n  },\n\n  computed: {\n    classes (): object {\n      return {\n        'v-card': true,\n        ...Routable.options.computed.classes.call(this),\n        'v-card--flat': this.flat,\n        'v-card--hover': this.hover,\n        'v-card--link': this.isClickable,\n        'v-card--loading': this.loading,\n        'v-card--disabled': this.disabled,\n        'v-card--raised': this.raised,\n        ...VSheet.options.computed.classes.call(this),\n      }\n    },\n    styles (): object {\n      const style: Dictionary<string> = {\n        ...VSheet.options.computed.styles.call(this),\n      }\n\n      if (this.img) {\n        style.background = `url(\"${this.img}\") center center / cover no-repeat`\n      }\n\n      return style\n    },\n  },\n\n  methods: {\n    genProgress () {\n      const render = Loadable.options.methods.genProgress.call(this)\n\n      if (!render) return null\n\n      return this.$createElement('div', {\n        staticClass: 'v-card__progress',\n        key: 'progress',\n      }, [render])\n    },\n  },\n\n  render (h): VNode {\n    const { tag, data } = this.generateRouteLink()\n\n    data.style = this.styles\n\n    if (this.isClickable) {\n      data.attrs = data.attrs || {}\n      data.attrs.tabindex = 0\n    }\n\n    return h(tag, this.setBackgroundColor(this.color, data), [\n      this.genProgress(),\n      this.$slots.default,\n    ])\n  },\n})\n"],"sourceRoot":""}