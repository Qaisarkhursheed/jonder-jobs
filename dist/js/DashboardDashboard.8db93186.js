(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["DashboardDashboard","Chat"],{"0b53":function(t,e,a){"use strict";a("bd91")},2351:function(t,e,a){"use strict";a("845e")},3600:function(t,e,a){"use strict";a("90ac")},"5c3a8":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.user?s("v-row",{staticClass:"layout-content mt-4 flex-shrink-1 flex-grow-1"},[t.messagesLoaded&&t.conversations.length?s("v-col",{attrs:{cols:"cols"}},[s("Chat")],1):t._e(),t.$store.getters["chat/selectedConversation"]?t._e():s("v-col",{class:{"d-flex flex-column my-auto":!t.showUpgradeBox},attrs:{cols:"cols"}},[s("div",{staticClass:"user-name"},[t._v(" "+t._s(t.$t("hello"))+", "),s("span",{staticStyle:{color:"#0253B3"}},[t._v(" "+t._s(t.user.first_name)+" "+t._s(t.user.last_name)+" ")])]),s("div",{staticClass:"no-msg"},[t._v(" "+t._s(t.conversations.length?""+t.$t("openChat"):""+t.$t("noMessages"))+" ")]),t.showUpgradeBox?s("UpgradeAccountBox",{staticClass:"dashboard-upgrade-account-box"}):t._e(),s("div",{staticClass:"mt-5"},[s("v-img",{attrs:{src:a("793f"),"max-width":"500"}})],1)],1)],1):t._e()],1)},i=[],n=a("5530"),r=a("2f62"),o=a("aeaf"),l=a("bcd3"),c={name:"Dashboard",created:function(){this.getAllConversations({limit:2})},computed:Object(n["a"])(Object(n["a"])(Object(n["a"])({},Object(r["c"])("user",["user"])),Object(r["c"])("chat",["conversations","messagesLoaded"])),{},{showUpgradeBox:function(){return!(this.messagesLoaded&&this.conversations.length)}}),methods:Object(n["a"])({},Object(r["b"])("chat",["getAllConversations"])),components:{Chat:l["default"],UpgradeAccountBox:o["a"]}},d=c,u=a("2877"),p=a("6544"),f=a.n(p),m=a("62ad"),v=a("adda"),h=a("0fd9"),g=Object(u["a"])(d,s,i,!1,null,null,null);e["default"]=g.exports;f()(g,{VCol:m["a"],VImg:v["a"],VRow:h["a"]})},6657:function(t,e,a){},"740d":function(t,e,a){"use strict";a("a205")},"77d2":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-dialog",{staticClass:"dialog",attrs:{persistent:"",width:t.$store.getters.screenSize?"95%":"750px","max-width":"750px","overlay-color":"#0253B3","overlay-opacity":"0.3"},on:{"click:outside":function(e){return t.close("abort")}},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[s("v-card",{staticClass:"rounded-lg wrap upgrade-dialog modal-plan",attrs:{flat:""}},[s("div",{staticClass:"modal-title"},[t._v(" "+t._s(t.$t("choosePlan"))+" ")]),t._l(t.data,(function(e){return s("div",{key:e.id,staticClass:"options",class:{deactive:t.userPlan.length&&t.isPlanActive(e.id),active:t.form.active_plan===e.id}},["jobseeker_paln"===e.plan_type?s("v-btn",{staticClass:"upgrade-option justify-start pa-2",attrs:{color:t.form.active_plan===e.id?"primary":"","min-height":"104",height:t.$store.getters.screenSize<500?"auto":"104"},on:{click:function(a){(!t.userPlan.length||!t.isPlanActive(e.id))&&(t.form.active_plan=e.id,t.savePlanId(e.id))}}},[s("v-img",{staticClass:"upgrade-icon",attrs:{src:a("ca84d")}}),t.userPlan.length&&t.isPlanActive(e.id)?s("UserPlanDescription",{staticClass:"user-plan-desc",attrs:{plan:t.getUserPlan(e.id)[0]}}):s("div",{staticClass:"upgrade-default"},[s("span",{staticClass:"upgrade-title"},[t._v(" "+t._s(e.name)+" ")]),s("p",{staticClass:"upgrade-text"},[t._v(" "+t._s(e.plan_description)+" ")]),s("span",{staticClass:"updgrade-price"},[t._v(t._s(e.price)+"â‚¬")])])],1):t._e()],1)})),s("div",{staticClass:"buttons"},[s("v-btn",{staticClass:"mt-16 font-weight-medium upgrade-btn",staticStyle:{"margin-right":"20px"},attrs:{height:"56"},on:{click:t.close}},[t._v(" "+t._s(t.$t("cancel"))+" ")]),s("v-btn",{staticClass:"mt-16 font-weight-medium upgrade-btn dark-blue",attrs:{loading:t.isLoading,color:"primary",height:"56",width:"178"},on:{click:function(e){return t.next()}}},[t._v(" "+t._s(t.$t("confirmOption"))+" ")])],1)],2)],1)},i=[],n=a("5530"),r=a("1da1"),o=(a("d3b7"),a("96cf"),a("4360")),l=a("bf8a"),c=a("2f62"),d=a("cf81"),u={name:"UpgradePlanModal",components:{UserPlanDescription:d["a"]},props:{active:{type:Boolean,default:!1},type:{type:String,default:"ok"},edit:{type:[Object,Boolean]}},data:function(){return{data:"",isLoading:!1,planId:null,stripeId:null,form:{active_plan:""}}},created:function(){this.edit&&this.populate(),this.data=this.$store.getters["user/plans"]("jobseeker_paln")},methods:{close:function(t){this.$emit("close",t)},savePlanId:function(t){this.planId=t},processStripe:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(t.stripeId&&t.stripeId.length>5)){e.next=8;break}return t.isLoading=!0,e.next=4,Object(l["a"])("pk_test_51J2VxwKKMFZvcsxu4VEDQetraMaOKVF6DAjvkSgkNPHMXktPW3ibXXEgRuYBLepBo6JvF4dWxeIvspapIbgVel2R00tehUJtX8");case 4:a=e.sent,a.redirectToCheckout({sessionId:t.stripeId}),e.next=9;break;case 8:t.isLoading=!1;case 9:case"end":return e.stop()}}),e)})))()},next:function(){var t=this;this.planId&&this.planId>0?(this.isLoading=!0,this.$http.post("".concat("https://dev.api.jonder.devla.dev/api/v1","/plan"),{plan_id:this.planId,payment_method:"credit card"}).then((function(e){t.stripeId=e.data.data.id})).finally((function(){t.isLoading=!1,t.processStripe()}))):(alert("Please select the plan!"),this.isLoading=!1)},save:function(){this.edit?o["a"].dispatch("user/updateUser",{id:this.edit.id,payload:this.form}):console.log(),this.$emit("close",1)},populate:function(){this.form.active_plan=this.edit.active_plan}},computed:Object(n["a"])({},Object(c["c"])({userPlan:"user/userPlan",getUserPlan:"user/getUserPlan",isPlanActive:"user/isPlanActive"}))},p=u,f=(a("d0127"),a("2877")),m=a("6544"),v=a.n(m),h=a("8336"),g=a("b0af"),b=a("169a"),_=a("adda"),C=Object(f["a"])(p,s,i,!1,null,"c9c69b10",null);e["a"]=C.exports;v()(C,{VBtn:h["a"],VCard:g["a"],VDialog:b["a"],VImg:_["a"]})},"793f":function(t,e,a){t.exports=a.p+"img/rafiki.db887e80.svg"},"845e":function(t,e,a){},"90ac":function(t,e,a){},"98f8":function(t,e,a){},a205:function(t,e,a){},a3fb:function(t,e,a){"use strict";a("ecb6")},aeaf:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"full-w"},[t.modals.UpgradePlan.active?s("UpgradePlanModal",{attrs:{active:t.modals.UpgradePlan.active,edit:t.modals.UpgradePlan.edit},on:{close:function(e){return t.toggleModal("UpgradePlan")}}}):t._e(),s("div",{staticClass:"upgrade-box"},[s("v-img",{staticClass:"badge",attrs:{src:a("ca84d"),width:t.small?"40":null}}),s("div",{staticClass:"title-description-wrapper",class:{"d-flex":!t.small},staticStyle:{"font-size":"13px","justify-content":"space-between"}},[s("div",{staticClass:"upgrade-title"},[t._v(" "+t._s(t.$t("premiumSuggestion"))+" ")]),s("div",[t._v(" "+t._s(t.$t("beOnTheTop"))+" ")])]),s("div",{staticClass:"link-upgrade-wrapper",class:{"mt-2":t.small}},[s("CardActionableList",{attrs:{type:"UpgradePlan"},on:{edit:function(e){return t.activateEdit("UpgradePlan",e)}}}),s("span",{staticClass:"link-upgrade",staticStyle:{color:"#55F481",width:"100%",cursor:"pointer"},on:{click:function(e){return t.toggleModal("UpgradePlan")}}},[t._v(" "+t._s(t.$t("upgradeNow"))+" ")])],1)],1)],1)},i=[],n=a("77d2"),r=a("cc1f"),o={props:{small:{type:Boolean,default:!1}},methods:{toggleModal:function(t){this.modals[t].edit=!1,this.modals[t].active=!this.modals[t].active},activateEdit:function(t,e){this.toggleModal(t),this.modals[t].edit=e}},components:{UpgradePlanModal:n["a"],CardActionableList:r["a"]},mounted:function(){null==this.$store.getters["user/userPlans"]&&this.$store.dispatch("user/fetchPlans")},data:function(){return{modals:{UpgradePlan:{active:!1,edit:!1,component:n["a"]}},fileActions:{UpgradePlan:["edit","delete"]}}}},l=o,c=(a("0b53"),a("2877")),d=a("6544"),u=a.n(d),p=a("adda"),f=Object(c["a"])(l,s,i,!1,null,null,null);e["a"]=f.exports;u()(f,{VImg:p["a"]})},bcd3:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.chatLoading?a("v-row",{staticClass:"full-h"},[a("spinner")],1):t.isCompany&&t.isChatEmpty?a("v-row",[a("v-col",[a("ChatEmpty")],1)],1):a("v-row",{staticStyle:{height:"calc(100vh - 150px)","min-height":"500px"}},[t.chatFull?t._e():a("v-col",{staticClass:"full-h",attrs:{cols:"col"}},[a("chat-asside",{staticClass:"full-h flex-grow-1 flex-shrink-1 overflow-list",on:{"item-click":function(e){t.showProfile=!1}}})],1),t.selectedConversation&&t.conversationDetails?a("v-col",{staticClass:"full-h",attrs:{cols:"col"}},[t.showProfile?a("PublicProfile",{staticStyle:{"overflow-y":"auto"},on:{back:function(e){t.showProfile=!1}}}):a("chat-messages",{attrs:{messages:t.selectedConversation,"conversation-details":t.conversationDetails},on:{"chat-full":function(e){t.chatFull=e},"show-profile":function(e){t.showProfile=!0}}})],1):t._e()],1)},i=[],n=a("1da1"),r=a("5530"),o=(a("4de4"),a("96cf"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{staticClass:"chat-conversations",attrs:{flat:""}},[a("v-card-title",{staticClass:"chat-conversations-title pl-7 pr-7"},[t._v(" "+t._s(t.$t("messages"))+" ")]),a("v-divider"),a("v-list",{staticClass:"pb-0",attrs:{subheader:""}},[a("v-list-item-group",{attrs:{color:"primary"}},t._l(t.conversations,(function(e,s){return a("div",{key:e.id},[t.showConversation(e)?a("chat-asside-item",{attrs:{conversation:e},on:{loading:function(e){t.loading=e},reload:t.refreshConversations,"item-click":function(e){return t.$emit("item-click")}}}):t._e(),s<t.conversations.length-1&&t.showConversation(e)?a("v-divider"):t._e()],1)})),0)],1),t.loading?a("div",{staticClass:"overlay"}):t._e()],1)}),l=[],c=a("2f62"),d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.getParticipian(t.conversation)?a("v-list-item",{key:"id-"+t.conversation.id,staticClass:"pt-3 pb-3 pl-7 pr-7",class:{"v-list-item--active":t.conversation.id==t.$store.getters["chat/conversationDetails"].id},on:{click:t.open}},[a("v-list-item-avatar",{staticClass:"text-center",attrs:{color:"primary"}},[t.getProfileImage(t.conversation)?a("v-img",{attrs:{src:t.getProfileImage(t.conversation)}}):a("span",{staticClass:"white--text full-w text-center d-block"},[t._v(" "+t._s(t._f("initials")(t.getParticipian(t.conversation)))+" ")])],1),a("v-list-item-content",[a("v-list-item-title",{staticStyle:{color:"#222222","font-weight":"600"},domProps:{textContent:t._s(t.getFullName(t.conversation))}}),a("v-list-item-subtitle",{domProps:{textContent:t._s(t.getShortMessage(t.conversation))}})],1),a("v-list-item-icon",{staticClass:"flex-column text-right"},[t.getUnreadCount>0?a("v-badge",{staticClass:"ml-auto",attrs:{color:"blue",content:t.getUnreadCount,inline:""}}):t._e(),a("div",{staticClass:"time-label",attrs:{title:t.$options.filters.moment(t.lastMessage,"DD.MM.YYYY HH:mm")}},[t.lastMessage?[t._v(" "+t._s(t._f("moment")(t.lastMessage,"from","now"))+" ")]:t._e()],2)],1)],1):t._e()},u=[],p=a("b85c"),f=(a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),a("9861"),a("99af"),a("ac1f"),a("5319"),{props:{conversation:{type:Object,required:!0}},created:function(){this.checkUrl()},computed:Object(r["a"])(Object(r["a"])({},Object(c["c"])("chat",["unreadMessages"])),{},{getUnreadCount:function(){return this.conversation.unread_messages},lastMessage:function(){return this.conversation.conversation.last_message?this.conversation.conversation.last_message.updated_at:""}}),methods:Object(r["a"])(Object(r["a"])(Object(r["a"])({},Object(c["b"])("chat",["getAllConversations","getSingleConversation","seenMessage"])),Object(c["d"])("chat",["SET_CONVERSATION_DETAILS"])),{},{getParticipian:function(t){var e,a=this.$store.getters["user/user"].id,s=Object(p["a"])(t.conversation.participants);try{for(s.s();!(e=s.n()).done;){var i=e.value;if(i.messageable_id!=a)return i.messageable}}catch(n){s.e(n)}finally{s.f()}return null},getProfileImage:function(t){var e=this.getParticipian(t).profile_img;if(!e)return null;try{var a=new URL(e);return a.href}catch(i){var s=new URL("https://dev.api.jonder.devla.dev/api/v1").origin;return"".concat(s,"/storage/avatars/").concat(e)}},getFullName:function(t){var e=this.getParticipian(t);return e.company||e.first_name+" "+e.last_name},getShortMessage:function(t){return t.conversation.last_message?"upload"==t.conversation.last_message.type?"File":t.conversation.last_message?t.conversation.last_message.body.substr(0,50):"-":""},checkUrl:function(){this.$route.params.id&&parseInt(this.$route.params.id)===parseInt(this.conversation.user_id)&&(this.open(),this.$route.params.company||this.$router.replace("/dashboard/chat"))},open:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.$emit("loading",!0),t.$emit("item-click"),a=t.getParticipian(t.conversation),t.SET_CONVERSATION_DETAILS({id:t.conversation.id,user_id:a.id,user_name:t.getFullName(t.conversation),unread_messages:t.conversation.unread_messages,profile_img:a.profile_img,starred:!!t.conversation.selection_managment.length,user:a}),e.next=6,t.getSingleConversation({id:t.conversation.id});case 6:t.getAllConversations(),t.$emit("refresh",!1),t.$emit("loading",!1);case 9:case"end":return e.stop()}}),e)})))()}})}),m=f,v=(a("2351"),a("2877")),h=a("6544"),g=a.n(h),b=a("15fd"),_=(a("a9e3"),a("ff44"),a("132d")),C=a("a9ad"),w=a("7560"),y=a("f2e7"),x=a("f40d"),$=a("fe6c"),k=a("58df"),O=a("80d2"),P=["aria-atomic","aria-label","aria-live","role","title"],j=Object(k["a"])(C["a"],Object($["b"])(["left","bottom"]),w["a"],y["a"],x["a"]).extend({name:"v-badge",props:{avatar:Boolean,bordered:Boolean,color:{type:String,default:"primary"},content:{required:!1},dot:Boolean,label:{type:String,default:"$vuetify.badge"},icon:String,inline:Boolean,offsetX:[Number,String],offsetY:[Number,String],overlap:Boolean,tile:Boolean,transition:{type:String,default:"scale-rotate-transition"},value:{default:!0}},computed:{classes:function(){return Object(r["a"])({"v-badge--avatar":this.avatar,"v-badge--bordered":this.bordered,"v-badge--bottom":this.bottom,"v-badge--dot":this.dot,"v-badge--icon":null!=this.icon,"v-badge--inline":this.inline,"v-badge--left":this.left,"v-badge--overlap":this.overlap,"v-badge--tile":this.tile},this.themeClasses)},computedBottom:function(){return this.bottom?"auto":this.computedYOffset},computedLeft:function(){return this.isRtl?this.left?this.computedXOffset:"auto":this.left?"auto":this.computedXOffset},computedRight:function(){return this.isRtl?this.left?"auto":this.computedXOffset:this.left?this.computedXOffset:"auto"},computedTop:function(){return this.bottom?this.computedYOffset:"auto"},computedXOffset:function(){return this.calcPosition(this.offsetX)},computedYOffset:function(){return this.calcPosition(this.offsetY)},isRtl:function(){return this.$vuetify.rtl},offset:function(){return this.overlap?this.dot?8:12:this.dot?2:4},styles:function(){return this.inline?{}:{bottom:this.computedBottom,left:this.computedLeft,right:this.computedRight,top:this.computedTop}}},methods:{calcPosition:function(t){return"calc(100% - ".concat(Object(O["g"])(t||this.offset),")")},genBadge:function(){var t=this.$vuetify.lang,e=this.$attrs["aria-label"]||t.t(this.label),a=this.setBackgroundColor(this.color,{staticClass:"v-badge__badge",style:this.styles,attrs:{"aria-atomic":this.$attrs["aria-atomic"]||"true","aria-label":e,"aria-live":this.$attrs["aria-live"]||"polite",title:this.$attrs.title,role:this.$attrs.role||"status"},directives:[{name:"show",value:this.isActive}]}),s=this.$createElement("span",a,[this.genBadgeContent()]);return this.transition?this.$createElement("transition",{props:{name:this.transition,origin:this.origin,mode:this.mode}},[s]):s},genBadgeContent:function(){if(!this.dot){var t=Object(O["s"])(this,"badge");return t||(this.content?String(this.content):this.icon?this.$createElement(_["a"],this.icon):void 0)}},genBadgeWrapper:function(){return this.$createElement("span",{staticClass:"v-badge__wrapper"},[this.genBadge()])}},render:function(t){var e=[this.genBadgeWrapper()],a=[Object(O["s"])(this)],s=this.$attrs,i=(s["aria-atomic"],s["aria-label"],s["aria-live"],s.role,s.title,Object(b["a"])(s,P));return this.inline&&this.left?a.unshift(e):a.push(e),t("span",{staticClass:"v-badge",attrs:i,class:this.classes},a)}}),S=a("adda"),D=a("da13"),V=a("8270"),I=a("5d23"),T=a("34c3"),E=Object(v["a"])(m,d,u,!1,null,null,null),L=E.exports;g()(E,{VBadge:j,VImg:S["a"],VListItem:D["a"],VListItemAvatar:V["a"],VListItemContent:I["a"],VListItemIcon:T["a"],VListItemSubtitle:I["b"],VListItemTitle:I["c"]});var M={components:{ChatAssideItem:L},data:function(){return{loading:!1}},computed:Object(c["c"])("chat",["conversations"]),methods:{refreshConversations:function(){this.$store.dispatch("chat/getAllConversations")},showConversation:function(t){var e=this.$store.getters["chat/conversationDetails"].id;return t.id==e||t.ids.length&&t.conversation.last_message}}},A=M,B=(a("ec01"),a("b0af")),F=a("99d9"),R=a("ce7e"),U=a("8860"),Y=a("1baa"),N=Object(v["a"])(A,o,l,!1,null,null,null),X=N.exports;g()(N,{VCard:B["a"],VCardTitle:F["d"],VDivider:R["a"],VList:U["a"],VListItemGroup:Y["a"]});var q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{staticClass:"messages-holder full-h d-flex flex-column",staticStyle:{"border-radius":"10px"},attrs:{flat:""}},[a("v-card-title",{staticClass:"flex-grow-0 flex-shrink-0 pb-5 pt-5"},[a("v-list-item",{staticClass:"grow"},[a("v-list-item-avatar",{attrs:{color:"primary"}},[t.conversationDetails.profile_img?a("v-img",{attrs:{alt:t.conversationDetails.user_name+" avatar",src:t.getProfileImage(t.conversationDetails)}}):a("span",{staticClass:"white--text full-w text-center d-block"},[t._v(" "+t._s(t._f("initials")(t.conversationDetails.user))+" ")])],1),a("v-list-item-content",[a("v-list-item-title",{staticStyle:{"font-weight":"600"}},[t._v(" "+t._s(t.conversationDetails.user_name)+" ")])],1),a("v-row",{attrs:{align:"center",justify:"end"}},["Jobseeker"==t.conversationDetails.user.role?a("v-icon",{staticClass:"chat-icon mr-3",attrs:{color:t.conversationDetails.starred?"#0253B3":null},on:{click:t.handleStarIconClick}},[t._v(" "+t._s(t.conversationDetails.starred?"mdi-star":"mdi-star-outline")+" ")]):t._e(),a("v-icon",{staticClass:"chat-icon mr-3",on:{click:function(e){return t.$emit("show-profile")}}},[t._v(" mdi-information-outline ")]),a("v-icon",{staticClass:"chat-icon mr-3",on:{click:function(e){t.chatFull=!t.chatFull,t.$emit("chat-full",t.chatFull)}}},[t._v(" "+t._s(t.chatFull?"mdi-arrow-collapse":"mdi-arrow-expand")+" ")]),a("v-icon",{staticClass:"chat-icon",on:{click:function(e){t.$store.commit("chat/CLEAR_SINGLE_CONVERSATION"),t.$emit("chat-full",!1)}}},[t._v(" mdi-close ")])],1)],1)],1),a("div",{staticClass:"pl-5 pr-5 flex-grow-1 flex-shrink-1 overflow-list"},[a("v-card-text",{staticClass:"messages-content pa-5 full-h flex-grow-1 flex-shrink-1 overflow-list",attrs:{id:"messageList"}},t._l(t.messages,(function(e,s){return a("div",{key:e.id,class:{"text-right":e.is_sender}},[0===s||e.created_at.substr(0,10)!=t.messages[s-1].created_at.substr(0,10)?a("div",{staticClass:"day-in-chat"},[a("span",[t._v(t._s(t._f("moment")(e.created_at,"ddd, DD/MM")))])]):t._e(),a("v-card",{staticClass:"message rounded-lg",class:[{"my-message":e.is_sender},[e.is_sender?"rounded-tr-0":"rounded-tl-0"]],attrs:{flat:""}},[a("v-card-text",["text"==e.type?a("div",{staticStyle:{"text-align":"left","white-space":"pre-wrap"},domProps:{textContent:t._s(e.body)}}):t._e(),"upload"==e.type?a("div",[t.isImage(e)?a("img",{staticStyle:{"max-width":"100%"},attrs:{src:t.getFileData(e).url}}):a("a",{attrs:{href:t.getFileData(e).url,target:"_blank"}},[t._v(" "+t._s(t.getFileData(e).name)+" ")])]):t._e(),a("small",{attrs:{title:t.$options.filters.moment(e.created_at,"DD.MM.YYYY HH:mm")}},[t._v(" "+t._s(t._f("moment")(e.created_at,"from","now"))+" ")])])],1)],1)})),0)],1),a("v-card-actions",{staticClass:"flex-grow-0 flex-shrink-0 pa-5 message-type-new"},[a("v-file-input",{staticClass:"pa-0",class:{"file-set":t.newFile},attrs:{"hide-input":""},model:{value:t.newFile,callback:function(e){t.newFile=e},expression:"newFile"}}),a("v-textarea",{staticStyle:{width:"100%","border-radius":"30px"},attrs:{label:t.$t("messageNow"),outlined:"",solo:"",flat:"","hide-details":"","background-color":"white",rows:"1","auto-grow":""},on:{drop:function(e){return e.preventDefault(),t.handleTextareaDrop.apply(null,arguments)}},model:{value:t.newMessage,callback:function(e){t.newMessage=e},expression:"newMessage"}},[t._v(t._s(t.$t("message"))+" ")]),a("MessageTemplatesPicker",{on:{submit:function(e){return t.send(e)}}}),a("v-icon",{staticClass:"message-send-btn ml-2",attrs:{disabled:t.sending,size:"30"},on:{click:function(e){return t.send(null)}}},[t._v(" mdi-send-circle ")])],1)],1)},J=[],z=(a("466d"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{width:"800","overlay-color":"#0253B3","overlay-opacity":"0.3"},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on,i=e.attrs;return[a("v-icon",t._g(t._b({staticClass:"ml-2",class:{"d-none":!t.templates.length}},"v-icon",i,!1),s),[t._v(" mdi-message-bulleted ")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t.$store.getters["messageTemplates/loadingFetch"]?t._e():a("v-card",{staticClass:"message-templates-picker pa-7"},[a("h1",{staticClass:"pb-4 mb-4",staticStyle:{"font-size":"28px","border-bottom":"1px solid #E9E9E9"}},[t._v(" "+t._s(t.$t("messageTemplates"))+" ")]),a("v-row",[a("v-col",{staticClass:"template-list",staticStyle:{"max-height":"370px",overflow:"auto"},attrs:{cols:"4"}},[t._l(t.templates,(function(e){return[a("div",{key:e.id,staticClass:"pa-3 font-weight-bold hover-pointer",class:{active:e.id==t.selectedTemplate.id},staticStyle:{"border-radius":"6px"},on:{click:function(a){return t.selectTemplate(e)}}},[t._v(" "+t._s(e.title)+" ")])]}))],2),a("v-col",{attrs:{cols:"col"}},[a("v-form",{ref:"form",attrs:{action:"#"},on:{submit:function(e){return e.preventDefault(),t.submit.apply(null,arguments)}},model:{value:t.isValid,callback:function(e){t.isValid=e},expression:"isValid"}},[a("label",{staticClass:"profile-label"},[t._v(" "+t._s(t.$t("templateName"))+" ")]),a("v-text-field",{attrs:{type:"text",disabled:"",dense:"",solo:"",outlined:"",flat:"","background-color":"white"},model:{value:t.selectedTemplate.title,callback:function(e){t.$set(t.selectedTemplate,"title",e)},expression:"selectedTemplate.title"}}),a("label",{staticClass:"profile-label"},[t._v(" "+t._s(t.$t("templateContent"))+" ")]),a("v-textarea",{attrs:{type:"text",rules:[t.validations.required],dense:"",outlined:"",flat:"","background-color":"white"},model:{value:t.formData.text,callback:function(e){t.$set(t.formData,"text",e)},expression:"formData.text"}}),a("ResponseAlert",{attrs:{response:t.formResponse}}),a("div",{staticClass:"d-flex justify-end"},[a("v-btn",{attrs:{height:"48"},on:{click:t.close}},[t._v(" "+t._s(t.$t("cancel"))+" ")]),a("v-btn",{staticClass:"ml-3 dark-blue px-10",attrs:{type:"submit",disabled:!t.isValid,color:"primary",height:"48"}},[t._v(" "+t._s(t.$t("send"))+" ")])],1)],1)],1)],1)],1)],1)}),W=[],H=a("6461"),G={components:{ResponseAlert:H["a"]},data:function(){return{selectedTemplate:{},templates:[],dialog:!1,isValid:!1,formData:{},formResponse:{}}},watch:{dialog:function(t){t&&this.selectTemplate(this.templates[0])}},created:function(){var t=this;this.$store.dispatch("messageTemplates/fetch",{per_page:200}).then((function(e){t.templates=e.data.data}))},methods:{selectTemplate:function(t){this.selectedTemplate=Object.assign({},t),this.formData.text=this.selectedTemplate.text},close:function(){this.dialog=!1,this.$refs.form.reset()},submit:function(){this.$emit("submit",this.formData.text),this.close()}}},K=G,Q=(a("a3fb"),a("8336")),Z=a("62ad"),tt=a("169a"),et=a("4bd4"),at=a("0fd9"),st=a("8654"),it=a("a844"),nt=Object(v["a"])(K,z,W,!1,null,null,null),rt=nt.exports;g()(nt,{VBtn:Q["a"],VCard:B["a"],VCol:Z["a"],VDialog:tt["a"],VForm:et["a"],VIcon:_["a"],VRow:at["a"],VTextField:st["a"],VTextarea:it["a"]});var ot={components:{MessageTemplatesPicker:rt},props:{messages:{type:Array,required:!0},conversationDetails:{type:Object,required:!0}},data:function(){return{newMessage:"",newFile:null,sending:!1,chatFull:!1}},mounted:function(){this.scrollToBottom()},methods:Object(r["a"])(Object(r["a"])(Object(r["a"])({},Object(c["b"])("chat",["sendMessage","getSingleConversation"])),Object(c["b"])("stats",["updateMessageYou"])),{},{scrollToBottom:function(){var t=document.getElementById("messageList");setTimeout((function(){t.scrollTo(t.scrollLeft,999999999)}),100)},send:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=e||this.newMessage;(a||this.newFile)&&(this.sending=!0,this.sendMessage({id:this.conversationDetails.id,file:this.newFile,message:a}).then((function(){t.newMessage="",t.newFile=null,setTimeout(t.scrollToBottom,1e3)})).finally((function(){t.sending=!1})))},getProfileImage:function(t){var e=t.profile_img;if(!e)return null;try{var a=new URL(e);return a.href}catch(i){var s=new URL("https://dev.api.jonder.devla.dev/api/v1").origin;return"".concat(s,"/storage/avatars/").concat(e)}},isImage:function(t){return"upload"==t.type&&this.getFileData(t).path.match(/.(jpg|jpeg|png|gif)$/i)},getFileData:function(t){return JSON.parse(t.body)},handleStarIconClick:function(){var t=this;this.conversationDetails.starred?this.$store.dispatch("company/slManagementDeleteCandidate",this.conversationDetails.user_id).then((function(){t.conversationDetails.starred=!1})):this.$store.dispatch("company/slManagementAddCandidate",{jobseeker_id:this.conversationDetails.user_id,managment_status:"Saved candidates"}).then((function(){t.conversationDetails.starred=!0}))},handleTextareaDrop:function(t){if(t.dataTransfer.items){for(var e=0;e<t.dataTransfer.items.length;e++)if("file"===t.dataTransfer.items[e].kind){this.newFile=t.dataTransfer.items[e].getAsFile();break}}else for(var a=0;a<t.dataTransfer.files.length;a++){this.newFile=t.dataTransfer.files[a];break}}}),watch:{conversationDetails:function(){var t=this;setTimeout((function(){t.scrollToBottom()}),500)}}},lt=ot,ct=(a("eb2f"),a("23a7")),dt=Object(v["a"])(lt,q,J,!1,null,null,null),ut=dt.exports;g()(dt,{VCard:B["a"],VCardActions:F["a"],VCardText:F["c"],VCardTitle:F["d"],VFileInput:ct["a"],VIcon:_["a"],VImg:S["a"],VListItem:D["a"],VListItemAvatar:V["a"],VListItemContent:I["a"],VListItemTitle:I["c"],VRow:at["a"],VTextarea:it["a"]});var pt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{staticClass:"messages-holder full-h d-flex flex-column",staticStyle:{background:"white","border-radius":"10px"},attrs:{flat:""}},[a("v-row",{staticClass:"pt-8 px-5 pb-4 mx-0",staticStyle:{flex:"unset","border-bottom":"1px solid #E3E3E4"}},[a("v-col",{staticClass:"d-flex my-auto",attrs:{cols:"auto"}},[a("v-icon",{attrs:{color:"black"},on:{click:function(e){return t.$emit("back")}}},[t._v(" mdi-arrow-left ")])],1),a("v-col",{staticClass:"d-flex my-auto"},[a("h2",{staticStyle:{"font-weight":"600","font-size":"17px"}},[t._v("Profile")])]),a("v-col",{staticClass:"d-flex my-auto",attrs:{cols:"auto"}},[a("v-icon",{attrs:{color:"black"},on:{click:function(e){t.$store.commit("chat/CLEAR_SINGLE_CONVERSATION"),t.$emit("chat-full",!1)}}},[t._v(" mdi-close ")])],1)],1),a("div",{staticClass:"pa-8"},[a("PublicProfileViewAs",{attrs:{user:t.$store.getters["chat/conversationDetails"].user}})],1)],1)},ft=[],mt=a("f872"),vt={components:{PublicProfileViewAs:mt["a"]}},ht=vt,gt=Object(v["a"])(ht,pt,ft,!1,null,null,null),bt=gt.exports;g()(gt,{VCard:B["a"],VCol:Z["a"],VIcon:_["a"],VRow:at["a"]});var _t=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"chat-empty"},[s("h1",[s("span",{staticClass:"greeting"},[t._v(t._s(t.$t("hello"))+", ")]),s("span",{staticClass:"name"},[t._v(t._s(t._f("fullname")(t.$store.getters["user/user"])))])]),s("p",[t._v(t._s(t.$t("messagesEmpty")))]),s("v-btn",{staticClass:"px-10 mt-3",attrs:{color:"primary",height:"48"},on:{click:function(e){return t.$router.push({name:"CompanySearch"})}}},[t._v(" "+t._s(t.$t("toJonderSearch"))+" ")]),s("v-img",{staticClass:"mx-auto mt-10",attrs:{width:"377",src:a("e755")}})],1)},Ct=[],wt={},yt=wt,xt=(a("740d"),Object(v["a"])(yt,_t,Ct,!1,null,null,null)),$t=xt.exports;g()(xt,{VBtn:Q["a"],VImg:S["a"]});var kt=a("6f96"),Ot={created:function(){this.init(),this.pollData()},beforeDestroy:function(){clearInterval(this.polling)},props:{isCompany:{type:Boolean,default:!1}},data:function(){return{messages:null,showProfile:!1,polling:null,chatFull:!1,chatLoading:!1}},methods:Object(r["a"])(Object(r["a"])({},Object(c["b"])("chat",["getAllConversations","addPlaceholderMessage","getSingleConversation","startChat","seenMessage"])),{},{init:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.chatLoading=!0,e.next=3,t.getAllConversations();case 3:t.chatLoading=!1,"new"===t.$route.params.type&&t.$route.params.id&&t.startChat(t.$route.params.id);case 5:case"end":return e.stop()}}),e)})))()},pollData:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.polling=setInterval(Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.conversationDetails&&t.conversationDetails.user_id&&t.getSingleConversation({id:t.conversationDetails.id}),t.getAllConversations();case 2:case"end":return e.stop()}}),e)}))),5e3);case 1:case"end":return e.stop()}}),e)})))()}}),computed:Object(r["a"])(Object(r["a"])({},Object(c["c"])("chat",["conversations","selectedConversation","conversationDetails"])),{},{isChatEmpty:function(){var t=this.$store.getters["chat/conversationDetails"].id;return this.conversations&&0==this.conversations.filter((function(e){return e.conversation.last_message||e.conversation.id==t})).length}}),components:{ChatMessages:ut,ChatAsside:X,PublicProfile:bt,Spinner:kt["a"],ChatEmpty:$t}},Pt=Ot,jt=Object(v["a"])(Pt,s,i,!1,null,null,null);e["default"]=jt.exports;g()(jt,{VCol:Z["a"],VRow:at["a"]})},bd91:function(t,e,a){},bf8a:function(t,e,a){"use strict";a.d(e,"a",(function(){return m}));var s="https://js.stripe.com/v3",i=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,n="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",r=function(){for(var t=document.querySelectorAll('script[src^="'.concat(s,'"]')),e=0;e<t.length;e++){var a=t[e];if(i.test(a.src))return a}return null},o=function(t){var e=t&&!t.advancedFraudSignals?"?advancedFraudSignals=false":"",a=document.createElement("script");a.src="".concat(s).concat(e);var i=document.head||document.body;if(!i)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return i.appendChild(a),a},l=function(t,e){t&&t._registerWrapper&&t._registerWrapper({name:"stripe-js",version:"1.18.0",startTime:e})},c=null,d=function(t){return null!==c||(c=new Promise((function(e,a){if("undefined"!==typeof window)if(window.Stripe&&t&&console.warn(n),window.Stripe)e(window.Stripe);else try{var s=r();s&&t?console.warn(n):s||(s=o(t)),s.addEventListener("load",(function(){window.Stripe?e(window.Stripe):a(new Error("Stripe.js not available"))})),s.addEventListener("error",(function(){a(new Error("Failed to load Stripe.js"))}))}catch(i){return void a(i)}else e(null)}))),c},u=function(t,e,a){if(null===t)return null;var s=t.apply(void 0,e);return l(s,a),s},p=Promise.resolve().then((function(){return d(null)})),f=!1;p["catch"]((function(t){f||console.warn(t)}));var m=function(){for(var t=arguments.length,e=new Array(t),a=0;a<t;a++)e[a]=arguments[a];f=!0;var s=Date.now();return p.then((function(t){return u(t,e,s)}))}},ca84d:function(t,e,a){t.exports=a.p+"img/top-rated.69631fe4.svg"},cf21:function(t,e,a){},cf81:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"plan-description",class:{"border-plan":t.borderPlan}},[a("h3",[t._v(t._s(t.plan.name))]),a("div",[t._v(" "+t._s(t.plan.price)+"â‚¬ / "+t._s(t.plan.days_valid)+" "+t._s(t.$t("daysValid"))+" ")]),a("div",[t._v(" "+t._s(t.$t("renewsOn"))+" "+t._s(t._f("moment")(t.plan.start_timestamp,"DD MMM, YYYY"))+" ")]),a("div",[t._v(" "+t._s(t.$t("validUntil"))+" "+t._s(t._f("moment")(t.plan.end_timestamp,"DD MMM, YYYY"))+" ")]),t.paymentInfo||t.paymentAction?a("div",{staticClass:"payment-info mt-6 pt-4"},[t.paymentInfo&&"CompanyPackagesPricing"!==t.$route.name?a("span",{staticClass:"carten-abenden",on:{click:function(e){return t.$router.push({name:"CompanyPackagesPricing"})}}},[t._v(" "+t._s(t.$t("changePackage"))+" ")]):t._e(),a("span",{staticClass:"payment-action",on:{click:function(e){return t.$store.dispatch("user/cancelSubscription",t.plan.id)}}},[t._v(" "+t._s(t.$t("cancelSubscription"))+" ")])]):t._e()])},i=[],n={name:"UserPlanDescription",props:{paymentInfo:{type:Boolean},paymentAction:{type:Boolean,default:!1},borderPlan:{type:Boolean,default:!1},plan:{type:Object,required:!0}}},r=n,o=(a("3600"),a("2877")),l=Object(o["a"])(r,s,i,!1,null,"e6012984",null);e["a"]=l.exports},d0127:function(t,e,a){"use strict";a("cf21")},e755:function(t,e,a){t.exports=a.p+"img/messages_empty.9c541638.png"},eb2f:function(t,e,a){"use strict";a("6657")},ec01:function(t,e,a){"use strict";a("98f8")},ecb6:function(t,e,a){},ff44:function(t,e,a){}}]);
//# sourceMappingURL=DashboardDashboard.8db93186.js.map